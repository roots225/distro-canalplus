var e=Object.assign;import{defineComponent as t,inject as a,computed as i,watch as n,onMounted as d,onBeforeUnmount as o}from"vue";import{getMaps as r}from"./x5-gmaps.es.js";import{d as l}from"./debounce.js";var c=t({name:"GmapsMarker",props:{animation:{type:Number,default:void 0},clickable:{type:Boolean,default:void 0},draggable:{type:Boolean,default:void 0},icon:{type:[String,Object],default:void 0},label:{type:[String,Object],default:void 0},opacity:{type:[String,Number],default:void 0},options:{type:Object,default:()=>({})},position:{type:Object,default:void 0},title:{type:String,default:void 0},visible:{type:Boolean,default:void 0},zIndex:{type:[String,Number],default:void 0},delay:{type:[Number,String],default:15}},emits:["animation_changed","click","clickable_changed","contextmenu","cursor_changed","dblclick","drag","dragend","draggable_changed","dragstart","flat_changed","icon_changed","mousedown","mouseout","mouseover","mouseup","position_changed","rightclick","shape_changed","title_changed","visible_changed","zindex_changed"],setup(t,{emit:c}){let g=null;const s=[],p=a("$getmap"),u=a("$gmapHandleError"),h=e=>u(e,"Marker"),m=i((()=>{const a=e({},t.options);return void 0!==t.animation&&(a.animation=t.animation),void 0!==t.clickable&&(a.clickable=t.clickable),void 0!==t.draggable&&(a.draggable=t.draggable),void 0!==t.icon&&(a.icon=t.icon),void 0!==t.label&&(a.label=t.label),void 0!==t.opacity&&(a.opacity=+t.opacity),void 0!==t.position&&(a.position=t.position),void 0!==t.title&&(a.title=t.title),void 0!==t.visible&&(a.visible=t.visible),void 0!==t.zIndex&&(a.zIndex=+t.zIndex),a}));n((()=>t),(()=>{g&&g.setOptions(m.value)}),{deep:!0});return d((()=>{if(!m.value.position)return h(new Error("A position is required by every marker. Set this as either a position prop, or a position property of the options prop."));r().then((a=>{const i=p();g=new a.Marker(e({map:i},m.value)),g?(e=>{const a=google.maps.event;s.push(a.addListener(e,"position_changed",l((()=>{var t;return c("position_changed",null==(t=e.getPosition())?void 0:t.toJSON())}),+t.delay)),a.addListener(e,"drag",l((e=>c("drag",e.latLng.toJSON(),+t.delay)))),a.addListener(e,"animation_changed",(()=>c("animation_changed",e.getAnimation()))),a.addListener(e,"click",(e=>c("click",e.latLng.toJSON()))),a.addListener(e,"clickable_changed",(()=>c("clickable_changed",e.getClickable()))),a.addListener(e,"contextmenu",(e=>c("contextmenu",e.latLng.toJSON()))),a.addListener(e,"cursor_changed",(()=>c("cursor_changed",e.getCursor()))),a.addListener(e,"dblclick",(e=>c("dblclick",e.latLng.toJSON()))),a.addListener(e,"dragend",(e=>c("dragend",e.latLng.toJSON()))),a.addListener(e,"draggable_changed",(()=>c("draggable_changed",e.getDraggable()))),a.addListener(e,"dragstart",(e=>c("dragstart",e.latLng.toJSON()))),a.addListener(e,"flat_changed",(e=>c("flat_changed",e))),a.addListener(e,"icon_changed",(()=>c("icon_changed",e.getIcon()))),a.addListener(e,"mousedown",(e=>c("mousedown",e.latLng.toJSON()))),a.addListener(e,"mouseout",(e=>c("mouseout",e.latLng.toJSON()))),a.addListener(e,"mouseover",(e=>c("mouseover",e.latLng.toJSON()))),a.addListener(e,"mouseup",(e=>c("mouseup",e.latLng.toJSON()))),a.addListener(e,"rightclick",(e=>c("rightclick",e.latLng.toJSON()))),a.addListener(e,"shape_changed",(()=>c("shape_changed",e.getShape()))),a.addListener(e,"title_changed",(()=>c("title_changed",e.getTitle()))),a.addListener(e,"visible_changed",(()=>c("visible_changed",e.getVisible()))),a.addListener(e,"zindex_changed",(()=>c("zindex_changed",e.getZIndex()))))})(g):h(new Error("There was a problem creating the marker."))})).catch((e=>h(e)))})),o((()=>{s.forEach((e=>e.remove())),r().then((e=>{g&&g.setMap(null),e.event.clearInstanceListeners(g)})).catch((e=>h(e)))})),()=>{}}});export default c;
