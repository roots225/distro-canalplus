var e=Object.assign;import{d as a}from"./debounce.js";import{defineComponent as t,ref as d,provide as n,watch as o,onMounted as r,onBeforeUnmount as s,openBlock as l,createBlock as i,renderSlot as g,createVNode as c,toDisplayString as m,createCommentVNode as p,withDirectives as u,vShow as h}from"vue";import{getMaps as L}from"./x5-gmaps.es.js";const v={center:{lat:-27.5,lng:153},zoom:12};var _=t({name:"GmapsMap",props:{delay:{type:[Number,String],default:15},timeout:{type:[Number,String],default:5e3},options:{type:Object,default:()=>({})}},emits:["bounds_changed","center_changed","click","contextmenu","dblclick","drag","dragend","dragstart","heading_changed","idle","maptypeid_changed","mousemove","mouseout","mouseover","projection_changed","rightclick","tilesloaded","tilt_changed","zoom_changed","mounted"],setup(t,{emit:l}){let i=d(null),g=d(!0),c=d(null);const m=d(),p=[],u=(e,a)=>c.value=`[${a}]: ${e.message}`;return n("$gmap",i),n("$getmap",(()=>i.value)),n("$gmapHandleError",u),o((()=>t.options),(e=>{i.value&&i.value.setOptions(e)}),{deep:!0}),r((()=>{L().then((d=>{i.value=new d.Map(m.value,e(e({},v),t.options)),i.value?(e=>{const d=google.maps.event;p.push(d.addListener(e,"bounds_changed",a((()=>l("bounds_changed",e.getBounds())),+t.delay)),d.addListener(e,"center_changed",a((()=>l("center_changed",e.getCenter())),+t.delay)),d.addListener(e,"drag",a((e=>l("drag",e)),+t.delay)),d.addListener(e,"mousemove",a((e=>l("mousemove",e)),+t.delay)),d.addListener(e,"click",(e=>l("click",e.latLng.toJSON()))),d.addListener(e,"contextmenu",(e=>l("contextmenu",e.latLng.toJSON()))),d.addListener(e,"dblclick",(e=>l("dblclick",e.latLng.toJSON()))),d.addListener(e,"dragend",(e=>l("dragend",e))),d.addListener(e,"dragstart",(e=>l("dragstart",e))),d.addListener(e,"heading_changed",(a=>l("heading_changed",e.getHeading()))),d.addListener(e,"idle",(e=>l("idle",e))),d.addListener(e,"maptypeid_changed",(a=>l("maptypeid_changed",e.getMapTypeId()))),d.addListener(e,"mouseout",(e=>l("mouseout",e.latLng.toJSON()))),d.addListener(e,"mouseover",(e=>l("mouseover",e.latLng.toJSON()))),d.addListener(e,"projection_changed",(a=>l("projection_changed",e.getProjection()))),d.addListener(e,"rightclick",(e=>l("rightclick",e.latLng.toJSON()))),d.addListener(e,"tilesloaded",(e=>l("tilesloaded",e))),d.addListener(e,"tilt_changed",(a=>l("tilt_changed",e.getTilt()))),d.addListener(e,"zoom_changed",(a=>l("zoom_changed",e.getZoom()))))})(i.value):u(new Error("Map could not be loaded"),"Map"),g.value=!1,l("mounted",i.value)}))})),s((()=>{p.forEach((e=>e.remove())),i&&window.google.maps.event.clearInstanceListeners(i)})),{loading:g,error:c,map:i,root:m}}});const y={class:"gmaps-wrapper"},b={class:"gmaps-error"},k=c("span",{class:"gmaps-spinner"},null,-1),f={ref:"root",class:"gmaps-map"};_.render=function(e,a,t,d,n,o){return l(),i("div",y,[e.error?g(e.$slots,"error",{key:0,error:e.error},(()=>[c("span",b,m(e.error),1)])):e.loading?g(e.$slots,"loading",{key:1},(()=>[k])):e.map?g(e.$slots,"default",{key:2,map:e.map}):p("",!0),u(c("div",f,null,512),[[h,!e.error&&!e.loading&&!!e.map]])])};export default _;
