var t=Object.assign;import{defineComponent as e,reactive as o,inject as i,ref as n,watch as s,onMounted as l,onBeforeUnmount as a,openBlock as c,createBlock as p,withModifiers as r,createVNode as d,renderSlot as h}from"vue";class g extends google.maps.OverlayView{constructor(e,o){super(),this.onAdd=()=>this.getPanes().floatPane.appendChild(this.content),this.onRemove=()=>this.content.parentElement?this.content.parentElement.removeChild(this.content):null,this.draw=()=>{const t=this.getProjection().fromLatLngToDivPixel(new google.maps.LatLng(this.position));this.content.style.left=t.x+"px",this.content.style.top=t.y+"px"},this.setPosition=e=>{this.position=t({},e),this.draw()},this.position=e,this.content=o,window.google.maps.OverlayView.preventMapHitsAndGesturesFrom(o)}}var u=e({name:"gmapsPopup",props:{background:{type:String,default:"#EEEEEE"},width:{type:String,default:"200px"},height:{type:String,default:"60px"},position:{type:Object,required:!0}},emits:["click","dblclick"],setup(t,{emit:e}){let c=null,p=o(i("$gmap"));const r=i("$gmapHandleError"),d=t=>r(t,"Popup"),h=n();return s((()=>t.position),(e=>{e&&c&&c.setPosition(t.position)})),l((()=>{console.log("root.value",h.value);try{c=new g(t.position,h.value),c.setMap(p)}catch(e){d(e)}})),a((()=>{try{c&&c.setMap(null)}catch(t){d(t)}})),{background:t.background,width:t.width,height:t.height,root:h,map:p,click:t=>e("click",t.latLng.toJSON()),dblclick:t=>e("dblclick",t.latLng.toJSON())}}});u.render=function(t,e,o,i,n,s){return c(),p("div",{ref:"root",class:"gmaps-popup-container",onClick:e[1]||(e[1]=r(((...e)=>t.click&&t.click(...e)),["prevent"])),onDblclick:e[2]||(e[2]=r(((...e)=>t.dblclick&&t.dblclick(...e)),["prevent"]))},[d("div",{class:"gmaps-popup-bubble-anchor",style:`color: ${t.background};`},[d("div",{class:"gmaps-popup-bubble",style:`background: ${t.background}; maxWidth:${t.width}; maxHeight:${t.height};`},[h(t.$slots,"default")],4)],4)],544)};export default u;
